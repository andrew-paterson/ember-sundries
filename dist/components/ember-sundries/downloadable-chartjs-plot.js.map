{"version":3,"file":"downloadable-chartjs-plot.js","sources":["../../../src/components/ember-sundries/downloadable-chartjs-plot.js"],"sourcesContent":["import Component from '@glimmer/component';\nimport base64ImageDownload from '../../utils/base64-image-download';\nimport { action } from '@ember/object';\nimport { tracked } from '@glimmer/tracking';\n\nclass ChartData {\n  constructor(args) {\n    for (const key in args) {\n      if (args[key] === undefined || args[key] === null) {\n        continue;\n      }\n      this[key] = args[key];\n    }\n  }\n}\n\nexport default class DownloadableChartjsPlot extends Component {\n  @tracked parsedChartData;\n  @tracked animationComplete;\n  @tracked chart;\n\n  @action\n  didInsert() {\n    var self = this;\n    if (!this.args.chartData) {\n      return;\n    }\n    var chartData = new ChartData(this.args.chartData);\n    const animation = {\n      onComplete(value) {\n        self.animationComplete = true;\n        self.chart = value.chart;\n      },\n    };\n    chartData.options.animation = animation;\n    const plugins = [\n      {\n        beforeDraw(chartInstance) {\n          var ctx = chartInstance.chart.ctx;\n          ctx.fillStyle = 'white';\n          ctx.fillRect(\n            0,\n            0,\n            chartInstance.chart.width,\n            chartInstance.chart.height,\n          );\n        },\n      },\n    ];\n    chartData.plugins = plugins;\n    this.parsedChartData = chartData;\n  }\n\n  @action\n  download() {\n    base64ImageDownload(this.chart.toBase64Image(), this.args.pngFileName);\n  }\n}\n"],"names":["ChartData","constructor","args","key","undefined","DownloadableChartjsPlot","Component","g","prototype","tracked","i","void 0","didInsert","self","chartData","animation","onComplete","value","animationComplete","chart","options","plugins","beforeDraw","chartInstance","ctx","fillStyle","fillRect","width","height","parsedChartData","n","action","download","base64ImageDownload","toBase64Image","pngFileName","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;;;AAKA,MAAMA,SAAS,CAAC;EACdC,WAAWA,CAACC,IAAI,EAAE;AAChB,IAAA,KAAK,MAAMC,GAAG,IAAID,IAAI,EAAE;AACtB,MAAA,IAAIA,IAAI,CAACC,GAAG,CAAC,KAAKC,SAAS,IAAIF,IAAI,CAACC,GAAG,CAAC,KAAK,IAAI,EAAE;AACjD,QAAA;AACF;AACA,MAAA,IAAI,CAACA,GAAG,CAAC,GAAGD,IAAI,CAACC,GAAG,CAAC;AACvB;AACF;AACF;AAEe,MAAME,uBAAuB,SAASC,SAAS,CAAC;AAAA,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,iBAAA,EAAA,CAC5DC,OAAO,CAAA,CAAA;AAAA;AAAA,EAAA,gBAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,iBAAA,CAAA,EAAAC,SAAA;AAAA,EAAA;IAAAJ,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,mBAAA,EAAA,CACPC,OAAO,CAAA,CAAA;AAAA;AAAA,EAAA,kBAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,mBAAA,CAAA,EAAAC,SAAA;AAAA,EAAA;IAAAJ,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,OAAA,EAAA,CACPC,OAAO,CAAA,CAAA;AAAA;AAAA,EAAA,MAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,OAAA,CAAA,EAAAC,SAAA;AAGRC,EAAAA,SAASA,GAAG;IACV,IAAIC,IAAI,GAAG,IAAI;AACf,IAAA,IAAI,CAAC,IAAI,CAACX,IAAI,CAACY,SAAS,EAAE;AACxB,MAAA;AACF;IACA,IAAIA,SAAS,GAAG,IAAId,SAAS,CAAC,IAAI,CAACE,IAAI,CAACY,SAAS,CAAC;AAClD,IAAA,MAAMC,SAAS,GAAG;MAChBC,UAAUA,CAACC,KAAK,EAAE;QAChBJ,IAAI,CAACK,iBAAiB,GAAG,IAAI;AAC7BL,QAAAA,IAAI,CAACM,KAAK,GAAGF,KAAK,CAACE,KAAK;AAC1B;KACD;AACDL,IAAAA,SAAS,CAACM,OAAO,CAACL,SAAS,GAAGA,SAAS;IACvC,MAAMM,OAAO,GAAG,CACd;MACEC,UAAUA,CAACC,aAAa,EAAE;AACxB,QAAA,IAAIC,GAAG,GAAGD,aAAa,CAACJ,KAAK,CAACK,GAAG;QACjCA,GAAG,CAACC,SAAS,GAAG,OAAO;AACvBD,QAAAA,GAAG,CAACE,QAAQ,CACV,CAAC,EACD,CAAC,EACDH,aAAa,CAACJ,KAAK,CAACQ,KAAK,EACzBJ,aAAa,CAACJ,KAAK,CAACS,MACtB,CAAC;AACH;AACF,KAAC,CACF;IACDd,SAAS,CAACO,OAAO,GAAGA,OAAO;IAC3B,IAAI,CAACQ,eAAe,GAAGf,SAAS;AAClC;AAAC,EAAA;IAAAgB,CAAA,CAAA,IAAA,CAAAtB,SAAA,EAAA,WAAA,EAAA,CA9BAuB,MAAM,CAAA,CAAA;AAAA;AAiCPC,EAAAA,QAAQA,GAAG;AACTC,IAAAA,mBAAmB,CAAC,IAAI,CAACd,KAAK,CAACe,aAAa,EAAE,EAAE,IAAI,CAAChC,IAAI,CAACiC,WAAW,CAAC;AACxE;AAAC,EAAA;IAAAL,CAAA,CAAA,IAAA,CAAAtB,SAAA,EAAA,UAAA,EAAA,CAHAuB,MAAM,CAAA,CAAA;AAAA;AAIT;AAACK,oBAAA,CAAAC,QAAA,EAzCoBhC,uBAAuB,CAAA;;;;"}
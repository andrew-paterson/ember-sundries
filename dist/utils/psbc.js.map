{"version":3,"file":"psbc.js","sources":["../../src/utils/psbc.js"],"sourcesContent":["// https://github.com/PimpTrizkit/PJs/wiki/12.-Shade,-Blend-and-Convert-a-Web-Color-(pSBC.js)\nexport default (p, c0, c1, l) => {\n  // Version 4.1\n  const pSBC = (p, c0, c1, l) => {\n    let r,\n      g,\n      b,\n      P,\n      f,\n      t,\n      h,\n      m = Math.round,\n      a = typeof c1 == 'string';\n    if (\n      typeof p != 'number' ||\n      p < -1 ||\n      p > 1 ||\n      typeof c0 != 'string' ||\n      (c0[0] != 'r' && c0[0] != '#') ||\n      (c1 && !a)\n    )\n      return null;\n    (h = c0.length > 9),\n      (h = a ? (c1.length > 9 ? true : c1 == 'c' ? !h : false) : h),\n      (f = pSBC.pSBCr(c0)),\n      (P = p < 0),\n      (t =\n        c1 && c1 != 'c'\n          ? pSBC.pSBCr(c1)\n          : P\n          ? { r: 0, g: 0, b: 0, a: -1 }\n          : { r: 255, g: 255, b: 255, a: -1 }),\n      (p = P ? p * -1 : p),\n      (P = 1 - p);\n    if (!f || !t) return null;\n    if (l)\n      (r = m(P * f.r + p * t.r)),\n        (g = m(P * f.g + p * t.g)),\n        (b = m(P * f.b + p * t.b));\n    else\n      (r = m((P * f.r ** 2 + p * t.r ** 2) ** 0.5)),\n        (g = m((P * f.g ** 2 + p * t.g ** 2) ** 0.5)),\n        (b = m((P * f.b ** 2 + p * t.b ** 2) ** 0.5));\n    (a = f.a),\n      (t = t.a),\n      (f = a >= 0 || t >= 0),\n      (a = f ? (a < 0 ? t : t < 0 ? a : a * P + t * p) : 0);\n    if (h)\n      return (\n        'rgb' +\n        (f ? 'a(' : '(') +\n        r +\n        ',' +\n        g +\n        ',' +\n        b +\n        (f ? ',' + m(a * 1000) / 1000 : '') +\n        ')'\n      );\n    else\n      return (\n        '#' +\n        (4294967296 + r * 16777216 + g * 65536 + b * 256 + (f ? m(a * 255) : 0))\n          .toString(16)\n          .slice(1, f ? undefined : -2)\n      );\n  };\n\n  pSBC.pSBCr = (d) => {\n    const i = parseInt;\n    let n = d.length,\n      x = {};\n    if (n > 9) {\n      const [r, g, b, a] = (d = d.split(','));\n      n = d.length;\n      if (n < 3 || n > 4) return null;\n      (x.r = i(r[3] == 'a' ? r.slice(5) : r.slice(4))),\n        (x.g = i(g)),\n        (x.b = i(b)),\n        (x.a = a ? parseFloat(a) : -1);\n    } else {\n      if (n == 8 || n == 6 || n < 4) return null;\n      if (n < 6)\n        d =\n          '#' +\n          d[1] +\n          d[1] +\n          d[2] +\n          d[2] +\n          d[3] +\n          d[3] +\n          (n > 4 ? d[4] + d[4] : '');\n      d = i(d.slice(1), 16);\n      if (n == 9 || n == 5)\n        (x.r = (d >> 24) & 255),\n          (x.g = (d >> 16) & 255),\n          (x.b = (d >> 8) & 255),\n          (x.a = Math.round((d & 255) / 0.255) / 1000);\n      else (x.r = d >> 16), (x.g = (d >> 8) & 255), (x.b = d & 255), (x.a = -1);\n    }\n    return x;\n  };\n  return pSBC(p, c0, c1, l);\n};\n"],"names":["p","c0","c1","l","pSBC","r","g","b","P","f","t","h","m","Math","round","a","length","pSBCr","toString","slice","undefined","d","i","parseInt","n","x","split","parseFloat"],"mappings":"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"}